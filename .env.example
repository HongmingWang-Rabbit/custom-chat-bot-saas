# =============================================================================
# Main Database - Tenant Metadata Store (PostgreSQL)
# =============================================================================
# This is the MASTER database that stores tenant metadata, including:
# - Encrypted database connection strings for each tenant
# - Encrypted API keys (LLM, Supabase service keys)
# - Tenant branding and configuration
#
# Each tenant gets their own DEDICATED database (provisioned via Supabase API).
# This master database only stores the metadata to connect to those tenant DBs.
#
# Format: postgresql://user:password@host:port/database
#
# Using Supabase:
DATABASE_URL=postgresql://postgres:password@db.xxxxx.supabase.co:5432/postgres
#
# Using Docker locally:
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/postgres

# =============================================================================
# Encryption Key (REQUIRED)
# =============================================================================
# Generate with: openssl rand -base64 32
# IMPORTANT: Keep this secret and never commit to version control!
MASTER_KEY=your-32-byte-base64-key-here

# =============================================================================
# OpenAI API Key (REQUIRED for embeddings and LLM)
# =============================================================================
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...

# =============================================================================
# Supabase Management API (REQUIRED for tenant provisioning)
# =============================================================================
# Access token: https://supabase.com/dashboard/account/tokens
# Org ID: Found in organization settings URL (e.g., supabase.com/dashboard/org/xxx)
#
# These credentials allow the app to automatically create new Supabase projects
# for each tenant. Without these, tenant creation will fail.
SUPABASE_ACCESS_TOKEN=sbp_xxxxx
SUPABASE_ORG_ID=your-org-id

# Default region for new tenant projects (optional, defaults to us-east-1)
# Available regions: us-east-1, us-west-1, eu-west-1, ap-southeast-1, etc.
# SUPABASE_DEFAULT_REGION=us-east-1

# =============================================================================
# Logging Configuration
# =============================================================================
# Log levels: trace, debug, info, warn, error, fatal
# In production, use 'info' or higher. In development, 'debug' is useful.
# LOG_LEVEL=info

# =============================================================================
# Redis Caching (OPTIONAL)
# =============================================================================
# Redis is used to cache RAG responses, reducing LLM API costs and improving
# latency for repeated questions. If not configured, caching is disabled.
#
# Local development with Docker:
#   docker run -d -p 6379:6379 redis
#
# Production options:
#   - Upstash (serverless): https://upstash.com (recommended for Vercel)
#   - Redis Cloud: https://redis.com/cloud
#   - AWS ElastiCache, etc.
#
# REDIS_URL=redis://localhost:6379
#
# Cache TTL in seconds (default: 3600 = 1 hour)
# RAG_CACHE_TTL_SECONDS=3600

# =============================================================================
# Optional: Supabase (for main app storage, auth)
# =============================================================================
# NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
# SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# =============================================================================
# Quick Start for Local Development
# =============================================================================
#
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Set up a PostgreSQL database with pgvector extension:
#    - Supabase (recommended): Create a project at supabase.com
#    - Docker: docker run -d -p 5432:5432 -e POSTGRES_PASSWORD=postgres ankane/pgvector
#
# 3. Generate a MASTER_KEY:
#    openssl rand -base64 32
#
# 4. Add your OpenAI API key
#
# 5. Run the seed script:
#    npm run seed
#
# 6. Start the development server:
#    npm run dev
#
# 7. Visit: http://localhost:3000/demo/demo-company
